<ion-view view-title="Fuel Station">
    <ion-side-menus>

        <ion-side-menu-content>
            <ion-header-bar class="bar-positive">
                <button class="button button-icon ion-navicon" ng-click="vm.toggleLeft()" ng-hide="$exposeAside.active"></button>
                <h1 class="title">Fuel Station Choices</h1>
            </ion-header-bar>
            <ion-content class="padding">
                <div ng-if="!vm.accountSvc.shouldHideItems" ng-repeat="cat in vm.categories" class="category-fade">
                    <h4>{{cat.label}}:</h4>
                    <hr />
                    <p>
                        <button class="button button-balanced" 
								ng-repeat="choice in vm.choiceSvc.categoricalChoices[cat.value]" 
								ng-show="choice.isActive" ng-click="vm.orderItem(choice, false,'pre')">{{choice.name}}</button>
                    </p>
                </div>
			<!-- Warning Msg for Hiding Items after Total Limit Reached -->
                <div class="category-fade" ng-if="vm.accountSvc.shouldHideItems">
                    <div class="energized-bg padding">
                        <h4 class="text-white">
                            You have reached your limit. To change your selection, remove items from your order list.
                        </h4>
                    </div>
                </div>
            </ion-content>
        </ion-side-menu-content>

        <ion-side-menu expose-aside-when="large">
            <ion-header-bar class="bar-positive">
                <h1 class="title">Current Order:</h1>
            </ion-header-bar>

            <ion-content>
                <div ng-show="vm.timeRemaining < 60" class="padding text-center">
                    <h4 class="text-center assertive"><strong>0:{{vm.seconds}} remaining. <br />Please make a selection.</strong></h4>
                </div>
                <ion-item class="bar-stable">
                    <p class="text-center">
                        Welcome, {{vm.accountSvc.athleteData[0].firstName}}
                        <br />
                    </p>
                    <p class="text-center">
                        <button class="button button-small button-positive"
								ng-click="vm.changeAthlete()">Change Athlete</button>
                        <br /><br />
                    </p>
<!--
                    <p>
                        <strong>
                            Monthly snacks remaining: {{vm.accountSvc.monthSnacksRemaining}}<br />
                            Snacks remaining today: {{vm.accountSvc.daySnacksRemaining}}<br />
                        </strong>
                    </p>
-->
                    <p>
                        <strong>
<!--                            preCount: {{vm.accountSvc.preCount}}<br/>-->
<!--                            postCount: {{vm.accountSvc.postCount}}<br/>-->
<!--                            snackCount: {{vm.accountSvc.snackCount}}<br/>-->
<!--                            staffCount: {{vm.accountSvc.staffCount}}<br/>-->
                            totalCount: {{vm.accountSvc.totalCount}}<br/>
                        </strong>
                    </p>
                </ion-item>
                <ion-item>
                    <button class="button button-stable stable-border" ng-click="vm.cancel()">Cancel</button>

                    <button class="button button-positive" ng-click="vm.onOrderClick()" ng-disabled="vm.orderItems.length === 0">Order</button>
                </ion-item>
                <ion-item class="item-button-right" ng-repeat="oi in vm.orderItems track by $index">
                    {{oi.name}}
                    <a class="button button-icon icon ion-close-circled assertive" ng-click="vm.removeItem($index)"></a>
                </ion-item>

            </ion-content>
        </ion-side-menu>

    </ion-side-menus>
</ion-view>
