<ion-view view-title="Overage Recharge Report">

    <ion-content class="has-header">
        <div class="container padding">
            <div class="list">
                <div class="row">
                    <div class="col-20">
                        <label class="item item-input item-select">
                            <div class="input-label">
                                Month
                            </div>
                            <select ng-model="vm.dateSelection.month" ng-init="vm.dateSelection.month = vm.currentMonth" 
                                    ng-options="num as month for (month, num) in vm.months"></select>
                        </label>

                    </div>

                    <div class="col-20">
                        <label class="item item-input item-select">
                            <div class="input-label">
                                Year
                            </div>
                            <select ng-model="vm.dateSelection.year" ng-init="vm.dateSelection.year = vm.currentYear" 
                                    ng-options="y for y in vm.years() track by y"></select>
                        </label>
                    </div>

                    <div class="col-10 text-center">
                        <button type="button" class="button button-positive" ng-click="vm.getMonthCounts()" style="min-height: 35px; line-height: 20px;">Go</button>

                    </div>

					<div class="col-20">
                        <label class="item item-input item-select">
                            <div class="input-label">
                                Team
                            </div>
						   <select name="type" ng-model="vm.selectedSport" ng-change="vm.onSelectSport()" 
								   ng-options="type.SportCodeID as type.description for type in vm.sports" required></select>
                        </label>
                    </div>

                    <div class="col-20">
                        <button type="button" class="button button-balanced" ng-click="vm.download()" style="min-height: 35px; line-height: 20px;" ng-disabled="vm.counts.length === 0">Download CSV</button>
                    </div>
                </div>



            </div>
            <div ng-if="vm.counts.length > 0" class="category-fade">
                <div class="row stable-bg m-b-10">
                    <div class="col-25"><strong>Team</strong></div>
                    <div class="col-50"><strong>Athlete</strong></div>
                    <div class="col-20"><strong>Counts</strong></div>
                </div>

                <div class="row m-b-10" ng-repeat="item in vm.counts | filter: vm.selectedTeamID">
                    <div class="col-25">{{item.SportCodeID}}</div>
                    <div class="col-50">{{item.LastName}}, {{item.FirstName}}</div>
                    <div class="col-20">{{item.OverageTotal}}</div>
                </div>
            </div>
            <div ng-if="vm.counts.length === 0" class="padding">
                <h4 ng-show="vm.noRecords">There are no records for the selected time period.</h4>
                <h4>Please select a month and year, then press Go.</h4>
            </div>
        </div>
        
        
    </ion-content>
</ion-view>
